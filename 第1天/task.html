<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
</head>

<body>
    <script>
        /*
            ç¬¬ä¸€å¤©ä½œä¸šå…¬å¸ƒï¼š
            ğŸ ç¼–å†™ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä¸º k å’Œ ä¸€ä¸ªæ— åºçš„çº¯æ•°å­—æ•°ç»„ã€‚è¯¥æ–¹æ³•åœ¨æ‰§è¡Œåï¼Œä¼šè¿”å›æ•°ç»„ä¸­ç¬¬ k å¤§çš„æ•°å­—ã€‚ç‰¹åˆ«æ³¨æ„ï¼Œå¦‚æœæ•°ç»„ä¸­ï¼Œæœ‰ä¸¤ä½æ•°å€¼ä¸€æ ·çš„æ•°å­—ï¼ŒåŒæ•°å€¼æ•°å­—æ’åå¹¶åˆ—ã€‚å¦‚ [3,1,3,2,5,4,5] ä¸­ï¼Œç¬¬ 1 å¤§çš„æ•°å­—ä¸º 5ï¼Œç¬¬2å¤§çš„æ•°å­—ä¸º 4ï¼Œç¬¬5å¤§çš„æ•°å­—ä¸º 1ã€‚
            ğŸ__proto__ å’Œ prototype ä¹‹å‰æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ
            ğŸ .call(), .apply() .bind() çš„åŒºåˆ«å’Œä½œç”¨ï¼Ÿbind æ–¹æ³•å¦‚ä½•æ¥å®ç°ï¼Ÿ

            1ã€æ²¡æœ‰å‚ä¸ç­ä¼šçš„ç«¥é‹ï¼Œæœç´¢â€œç¦è¨€â€ä¸¤ä¸ªå­—ï¼Œçˆ¬æ¥¼è·å–å…¨éƒ¨ä¿¡æ¯ï¼›
            2ã€ä½œä¸šå°ç¨‹åºæ‰“å¡ï¼Œå¯ä»¥æœç´¢â€œé‡‘ä¸‰é“¶å››ç¢¾å‹é¢è¯•å®˜â€çˆ¬æ¥¼è·å–ã€‚
            */

        /**
              ç¬¬1é¢˜ï¼š
              ğŸç¼–å†™ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä¸º k å’Œ ä¸€ä¸ªæ— åºçš„çº¯æ•°å­—æ•°ç»„ã€‚è¯¥æ–¹æ³•åœ¨æ‰§è¡Œåï¼Œä¼šè¿”å›æ•°ç»„ä¸­ç¬¬ k å¤§çš„æ•°å­—ã€‚ç‰¹åˆ«æ³¨æ„ï¼Œå¦‚æœæ•°ç»„ä¸­ï¼Œæœ‰ä¸¤ä½æ•°å€¼ä¸€æ ·çš„æ•°å­—ï¼ŒåŒæ•°å€¼æ•°å­—æ’åå¹¶åˆ—ã€‚å¦‚ [3,1,3,2,5,4,5] ä¸­ï¼Œç¬¬ 1 å¤§çš„æ•°å­—ä¸º 5ï¼Œç¬¬2å¤§çš„æ•°å­—ä¸º 4ï¼Œç¬¬5å¤§çš„æ•°å­—ä¸º 1ã€‚
              åˆ†æï¼š
              k >= 0, && k <= arr.length;
              æ•°ç»„ä»å°åˆ°å¤§æ’åºï¼Œ
              æ•°ç»„å»é‡
              */
        // k: ç¬¬kå¤§
        // arrï¼šéœ€è¦å¤„ç†çš„æ•°ç»„
        console.log("*********ç¬¬1é¢˜å¼€å§‹***************");

        function selectK(k, arr) {
            if (k <= 0) return;
            const sortArr = sort(arr);
            const uniqueArr = unique(sortArr);
            // å¯¹è¶…å‡ºæ•°ç»„é•¿åº¦å¤„ç†
            k = k >= uniqueArr.length ? uniqueArr.length : k;
            const result = uniqueArr[k - 1];
            return result;
        }
        // å¯¹æ•°ç»„ä»å¤§åˆ°å°æ’åº
        function sort(arr) {
            return arr.sort(function (a, b) {
                return b - a;
            });
        }
        // å¯¹æ•°ç»„å»é‡
        function unique(arr) {
            const unique = new Set();
            return arr.filter(item => {
                const id = item + JSON.stringify(item);
                if (unique.has(id)) {
                    return false;
                } else {
                    unique.add(id);
                    return true;
                }
            });
        }
        let a1 = [1, 2, 0, -1, 4, 5, 0, 9, 9, 8];
        let k = 1;
        // a1 = [3,1,3,2,5,4,5];
        console.log(a1, "çš„ç¬¬", k, "å¤§ç»“æœæ˜¯:");
        console.log(selectK(k, a1));

        // ç®€æ´æ–¹æ³•
        function getNum(k, arr) {
            let newArr = Array.from(
                new Set(
                    arr.sort(function (a, b) {
                        return b - a;
                    })
                )
            );
            if (k >= newArr.length) return;
            return `ç¬¬${k}å¤§çš„æ•°å­—æ˜¯ï¼š${newArr[k - 1]}`;
        }
        console.log(getNum(1, [0, 9, 8, 9, 10, 1, 0]));
        console.log("*********ç¬¬1é¢˜ç»“æŸ***************");

        /*
              ç¬¬2é¢˜ï¼š
              ğŸ__proto__ å’Œ prototype ä¹‹å‰æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ
              å®ä¾‹è¯å¯¹è±¡çš„__proto__æŒ‡å‘åŸå‹å¯¹è±¡çš„prototype
              */

        /*
              ç¬¬3é¢˜ï¼š
              ğŸ .call(), .apply() .bind() çš„åŒºåˆ«å’Œä½œç”¨ï¼Ÿbind æ–¹æ³•å¦‚ä½•æ¥å®ç°ï¼Ÿ
              åŒºåˆ«ï¼š
                1ï¼‰bindè¿”å›æ˜¯ä¸€ä¸ªæ–°å‡½æ•°ï¼Œå¿…é¡»è¦è°ƒç”¨ä¸€ä¸‹
                2ï¼‰ä¼ å‚æ–¹å¼ä¸åŒ, å®ƒä»¬çš„ç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯æŒ‡å‘çš„this, call åé¢å‚æ•°ç”¨é€—å·åˆ†å‰²æ’åˆ—ï¼Œapplyåé¢å‚æ•°ä½¿ç”¨æ•°ç»„å½¢å¼ï¼Œbindä¸¤ç§æ–¹å¼å‡å¯
              ä½œç”¨ï¼šæ”¹å˜thisæŒ‡å‘
              bindå®ç°ï¼šbindæ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªç»‘å®šå‡½æ•°ï¼Œå½“è°ƒç”¨ç»‘å®šå‡½æ•°æ—¶ï¼Œä¼šä»¥ç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸ºthis
              */
        Function.prototype.myBind = function (obj, ...args) {
            const fn = this;
            return function (...rest) {
                fn.call(obj || window, ...args, ...rest);
            };
        };

        // ä»»æ„éœ€è¦æ”¹å˜thisæŒ‡å‘çš„å‡½æ•°
        const anyFn = function () {
            console.log(
                "***************è¿™æ˜¯éœ€è¦æ”¹å˜thisæŒ‡å‘çš„å‡½æ•°å†…éƒ¨**********start"
            );
            console.log("æ”¹å˜ä¹‹åçš„this===", this);
            console.log("å‡½æ•°çš„å‚æ•°===", ...arguments);
            console.log(
                "***************è¿™æ˜¯éœ€è¦æ”¹å˜thisæŒ‡å‘çš„å‡½æ•°å†…éƒ¨**********end"
            );
        };
        anyFn.myBind({}, 1)();
        // éœ€è¦æŒ‡å‘çš„å¯¹è±¡
        const obj = {
            a: "aaa",
            b: "bbb"
        };

        /**
         * @Date: 2021-03-18 10:55:50
         * @description: æ‰‹åŠ¨å®ç°çš„call
         * @param {æ”¹å˜thisæ‰€æŒ‡å‘çš„é‚£ä¸ªå¯¹è±¡} obj
         * @return {æ”¹å˜thisä¹‹åå¹¶ä¸”è‡ªæ‰§è¡Œçš„å‡½æ•°}
         */
        // Function.prototype.myCall = function(obj) {
        //     // æ”¹å˜thisæ‰€æŒ‡å‘çš„é‚£ä¸ªå¯¹è±¡ å…¼å®¹
        //     obj = obj || window;
        //     //  å®šä¹‰è°ƒç”¨å‡½æ•°ï¼Œå¹¶ä¸”æŒ‡å‘obj
        //     obj.copyAnyFn = this;
        //     // anyFnä¼ å…¥çš„å‚æ•°
        //     const args = [...arguments].slice(1);
        //     const res = args.length
        //         ? obj.copyAnyFn(...args)
        //         : obj.copyAnyFn();
        //     //  åˆ é™¤copyAnyFnï¼Œä¿æŒobjæ˜¯ä¼ å…¥æ—¶çŠ¶æ€
        //     delete obj.copyAnyFn;
        //     return res;
        // };
        // //  æµ‹è¯•-myCall
        // anyFn.myCall(obj, 1, 2, 3);
        // anyFn.myCall(obj);

        Function.prototype.myApply = function (obj) {
            obj = obj || window;
            obj.copyAnyFn = this;
            const res = arguments[1] ?
                obj.copyAnyFn(arguments[1]) :
                obj.copyAnyFn();
            delete obj.copyAnyFn;
            return res;
        };
        //  æµ‹è¯•-myApply
        anyFn.myApply(obj, [1, 2, 3]);
        anyFn.myApply(obj)
    </script>
</body>

</html>